; MySQL Optimalizált Konfiguráció - Zed CMMS System
; Másold ezt a fájlt a MySQL szerverre és nevezd át my.ini-re (Windows) vagy my.cnf-re (Linux)
; 
; FONTOS: 
; - Módosítsd az innodb_buffer_pool_size értékét a szerver RAM méretéhez!
; - MySQL újraindítása szükséges a változtatások után
; - Készíts backup-ot a jelenlegi konfigról!

[mysqld]
; ============================================
; ALAPVETŐ BEÁLLÍTÁSOK
; ============================================

; InnoDB Buffer Pool - A LEGFONTOSABB BEÁLLÍTÁS!
; Állítsd be a RAM 70-80%-ára (de legalább 1GB)
; Példa: Ha 4GB RAM van, állítsd 2-3GB-ra
; Példa: Ha 8GB RAM van, állítsd 4-6GB-ra
innodb_buffer_pool_size = 2G
innodb_buffer_pool_instances = 4

; InnoDB Log File mérete (növeli az írási teljesítményt)
innodb_log_file_size = 256M
innodb_log_buffer_size = 64M

; InnoDB Flush Módszer (gyorsabb írás, kompromisszum a biztonság és sebesség között)
; 0 = legyorsabb (veszélyes), 1 = legbiztonságosabb (lassabb), 2 = kompromisszum (ajánlott)
innodb_flush_log_at_trx_commit = 2

; InnoDB I/O Threads (gyorsabb I/O műveletek)
innodb_read_io_threads = 4
innodb_write_io_threads = 4

; InnoDB Flush Method (Windows: unbuffered, Linux: O_DIRECT)
; Windows esetén:
innodb_flush_method = unbuffered

; ============================================
; KAPCSOLAT BEÁLLÍTÁSOK
; ============================================

; Maximális kapcsolatok száma (növelve a CMMS rendszerhez)
max_connections = 200

; Kapcsolat timeout (10 perc)
wait_timeout = 600
interactive_timeout = 600

; Connection timeout (gyorsabb hiba detektálás)
connect_timeout = 10

; ============================================
; TEMP TÁBLÁK ÉS SORT
; ============================================

; Temp táblák memóriában (gyorsabb, ne használjon lemezt)
tmp_table_size = 128M
max_heap_table_size = 128M

; Sort buffer (gyorsabb rendezés)
sort_buffer_size = 4M
read_buffer_size = 2M
read_rnd_buffer_size = 4M

; Join buffer (gyorsabb JOIN műveletek)
join_buffer_size = 4M

; ============================================
; SLOW QUERY LOG (Lassú Query-k Azonosításához)
; ============================================

; Slow query log engedélyezése
slow_query_log = 1

; Slow query log fájl helye
; Windows:
slow_query_log_file = C:/ProgramData/MySQL/MySQL Server 8.0/Data/slow-query.log
; Linux:
; slow_query_log_file = /var/log/mysql/slow-query.log

; 2 másodperc feletti query-k naplózása
long_query_time = 2

; ============================================
; TABLE CACHE
; ============================================

; Táblák cache-elése (gyorsabb tábla hozzáférés)
table_open_cache = 2000
table_definition_cache = 1400

; Thread cache (gyorsabb új kapcsolatok)
thread_cache_size = 50

; ============================================
; KEY BUFFER (MyISAM táblákhoz, ha vannak)
; ============================================

key_buffer_size = 32M

; ============================================
; BINLOG (Ha nincs replication, kikapcsolható)
; ============================================

; Binlog kikapcsolása ha nincs replication (gyorsabb)
; skip-log-bin

; ============================================
; PERFORMANCE SCHEMA (Hasznos, de fogyaszt erőforrást)
; ============================================

performance_schema = ON
performance_schema_max_table_instances = 12500

; ============================================
; WINDOWS-SPECIFIKUS BEÁLLÍTÁSOK
; ============================================

; Shared memory (Windows)
shared-memory
shared-memory-base-name = MYSQL

; ============================================
; EGYÉB OPTIMALIZÁLÁSOK
; ============================================

; Query cache (MySQL 5.7-ben elérhető, MySQL 8.0-ban nincs)
; query_cache_type = 1
; query_cache_size = 128M
; query_cache_limit = 4M

; Character set
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

; SQL Mode (szigorú mód)
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_DATE,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO

; ============================================
; INNODB OPTIMALIZÁLÁSOK
; ============================================

; InnoDB file format
innodb_file_format = Barracuda

; InnoDB file per table (ajánlott)
innodb_file_per_table = 1

; InnoDB lock wait timeout
innodb_lock_wait_timeout = 50

; InnoDB deadlock detection
innodb_deadlock_detect = ON

; ============================================
; LOGGING
; ============================================

; General log (csak debug esetén)
general_log = 0

; Error log
log_error = mysql_error.log

; ============================================
; MEMÓRIA OPTIMALIZÁLÁSOK
; ============================================

; Max allowed packet (nagy adatokhoz)
max_allowed_packet = 64M

; Bulk insert buffer
bulk_insert_buffer_size = 64M

; ============================================
; NETWORK
; ============================================

; Max connections per hour (rate limiting)
max_connections_per_hour = 0

; ============================================
; AJÁNLOTT ÉRTÉKEK MÉRET SZERINT
; ============================================
;
; KIS SZERVER (< 4GB RAM):
;   innodb_buffer_pool_size = 1G
;   max_connections = 100
;   tmp_table_size = 64M
;
; KÖZEPES SZERVER (4-8GB RAM):
;   innodb_buffer_pool_size = 2-4G
;   max_connections = 200
;   tmp_table_size = 128M
;
; NAGY SZERVER (> 8GB RAM):
;   innodb_buffer_pool_size = 4-8G
;   max_connections = 300
;   tmp_table_size = 256M
;




